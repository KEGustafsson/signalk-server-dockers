diff --git a/test/rate-limit.js b/test/rate-limit.js
index 323cb07..f3885a2 100644
--- a/test/rate-limit.js
+++ b/test/rate-limit.js
@@ -102,3 +102,55 @@ describe('Rate Limiting', () => {
     res.status.should.equal(429)
   })
 })
+
+describe('Rate Limiting with trustProxy enabled', () => {
+  let server, url, port
+
+  before(async function () {
+    port = await freeport()
+    url = `http://0.0.0.0:${port}`
+    const securityConfig = {
+      allowNewUserRegistration: true,
+      allowDeviceAccessRequests: true
+    }
+    // Enable trustProxy: true to verify no ERR_ERL_PERMISSIVE_TRUST_PROXY errors
+    // This would throw ValidationError if rate limiter validate.trustProxy is not false
+    const extraConfig = {
+      settings: {
+        trustProxy: true
+      }
+    }
+    server = await startServerP(port, true, extraConfig, securityConfig)
+  })
+
+  after(async function () {
+    await server.stop()
+  })
+
+  it('should start without ERR_ERL_PERMISSIVE_TRUST_PROXY error and handle requests', async function () {
+    // If we reach here, the server started without rate limiter validation errors
+    // Make a request to verify rate limiting still works with trustProxy enabled
+    const res = await fetch(`${url}/signalk/v1/auth/login`, {
+      method: 'POST',
+      headers: { 'Content-Type': 'application/json' },
+      body: JSON.stringify({
+        username: 'admin',
+        password: 'wrongpassword'
+      })
+    })
+    // Should get 401 (unauthorized) not a server error
+    res.status.should.equal(401)
+  })
+
+  it('should respect X-Forwarded-For header when trustProxy is enabled', async function () {
+    // With trustProxy enabled, the server should use X-Forwarded-For for client IP
+    // This test verifies the request succeeds (doesn't throw validation errors)
+    const res = await fetch(`${url}/loginStatus`, {
+      headers: {
+        'X-Forwarded-For': '192.168.1.100'
+      }
+    })
+    // Should get a valid response (not rate limited on first request)
+    res.status.should.be.oneOf([200, 401, 403])
+  })
+})
